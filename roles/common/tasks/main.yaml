---
# set the node hostname to match the inventory hostname, as long as the inventory
# host is not an IP address
- name: ensure hostname matches inventory hostname
  hostname:
    name: "{{ inventory_hostname }}"
  when: not inventory_hostname is match('(\d{1,3}\.){3}\d{1,3}')
  register: hostname
  tags: hostname


# reboot if needed
- name: reboot
  reboot:
    reboot_timeout: 300
  when: hostname.changed
